# CONTEXTO DEL PROYECTO - MY HOST BizMate

## PROYECTO
- **Nombre:** MY HOST BizMate
- **UbicaciÃ³n:** C:\myhost-bizmate
- **Branch actual:** backup-antes-de-automatizacion
- **Stack:** React 18.2 + Vite + Tailwind CSS + Supabase
- **URL Vercel:** https://myhost-bizmate-mfxwn8itv-jose-carrallos-projects.vercel.app

## REFACTOR COMPLETADO (27 Nov 2025)

### LO QUE SE HIZO:
âœ… **Refactor estructural completo** del frontend
âœ… App.jsx reducido de **4,019 lÃ­neas â†’ 214 lÃ­neas** (94.7% reducciÃ³n)
âœ… **21 mÃ³dulos** extraÃ­dos a componentes separados
âœ… **10 componentes comunes** reutilizables creados
âœ… Servicio Supabase centralizado
âœ… AppContext para estado global
âœ… **Commit creado:** e149395
âœ… **Push exitoso** a GitHub

### ESTRUCTURA ACTUAL:
```
src/
â”œâ”€â”€ App.jsx (214 lÃ­neas) - REFACTORIZADO âœ…
â”œâ”€â”€ App.jsx.backup (4,019 lÃ­neas) - BACKUP
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/ (10 componentes reutilizables)
â”‚   â”‚   â”œâ”€â”€ ModuleCard.jsx
â”‚   â”‚   â”œâ”€â”€ ModuleGridCard.jsx
â”‚   â”‚   â”œâ”€â”€ StatCard.jsx
â”‚   â”‚   â”œâ”€â”€ PaymentCard.jsx
â”‚   â”‚   â”œâ”€â”€ BookingCard.jsx
â”‚   â”‚   â”œâ”€â”€ MessageCard.jsx
â”‚   â”‚   â”œâ”€â”€ PropertyCard.jsx
â”‚   â”‚   â”œâ”€â”€ PricingCard.jsx
â”‚   â”‚   â”œâ”€â”€ CampaignCard.jsx
â”‚   â”‚   â”œâ”€â”€ WorkflowCard.jsx
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ Dashboard/Dashboard.jsx
â”‚   â”œâ”€â”€ Payments/Payments.jsx
â”‚   â”œâ”€â”€ Bookings/Bookings.jsx
â”‚   â”œâ”€â”€ Messages/Messages.jsx
â”‚   â”œâ”€â”€ Properties/Properties.jsx
â”‚   â”œâ”€â”€ AIAssistant/AIAssistant.jsx
â”‚   â”œâ”€â”€ Multichannel/Multichannel.jsx
â”‚   â”œâ”€â”€ Marketing/Marketing.jsx
â”‚   â”œâ”€â”€ SocialPublisher/SocialPublisher.jsx
â”‚   â”œâ”€â”€ SmartPricing/SmartPricing.jsx
â”‚   â”œâ”€â”€ Reports/Reports.jsx
â”‚   â”œâ”€â”€ PMSCalendar/PMSCalendar.jsx
â”‚   â”œâ”€â”€ BookingEngine/BookingEngine.jsx
â”‚   â”œâ”€â”€ VoiceAI/VoiceAI.jsx
â”‚   â”œâ”€â”€ Operations/Operations.jsx
â”‚   â”œâ”€â”€ Reviews/Reviews.jsx
â”‚   â”œâ”€â”€ RMSIntegration/RMSIntegration.jsx
â”‚   â”œâ”€â”€ DigitalCheckIn/DigitalCheckIn.jsx
â”‚   â”œâ”€â”€ CulturalIntelligence/CulturalIntelligence.jsx
â”‚   â””â”€â”€ Workflows/
â”‚       â”œâ”€â”€ Workflows.jsx
â”‚       â”œâ”€â”€ AITripPlanner.jsx
â”‚       â””â”€â”€ BookingWorkflow.jsx
â”œâ”€â”€ services/
â”‚   â””â”€â”€ supabase.js
â””â”€â”€ context/
    â””â”€â”€ AppContext.jsx
```

### ESTADO ACTUAL:
- âœ… CompilaciÃ³n exitosa sin errores
- âœ… AplicaciÃ³n funcional probada en localhost:5176
- âœ… Commit y push completados
- âœ… Cero breaking changes
- âœ… Funcionalidad 100% preservada

### SUPABASE:
- **URL:** https://jjpscimtxrudtepzwhag.supabase.co
- **Key guardada en:** src/services/supabase.js
- **Tablas principales:** properties, bookings, payments, etc.

## COMANDOS ÃšTILES:

### Desarrollo:
```bash
cd C:\myhost-bizmate
npm run dev  # Inicia en localhost (puerto 5173-5176)
```

### Git:
```bash
git status
git log --oneline -5
git branch
git show e149395  # Ver commit del refactor
```

### Deploy Vercel:
```bash
vercel --prod --yes
```

## PRÃ“XIMA TAREA ACTIVA (28 Nov 2025):

### ğŸ¯ **n8n WORKFLOW: Flujo B - Recomendaciones IA Diarias**

**ESTADO:** Listo para comenzar maÃ±ana con aprendizaje hands-on

**QUÃ‰ ES:** Workflow automatizado que usa Claude AI para generar recomendaciones personalizadas diarias para huÃ©spedes activos (restaurantes, actividades, experiencias locales) y enviarlas por email/WhatsApp.

**PASOS PENDIENTES PARA MAÃ‘ANA:**

1. **Obtener Claude API Key:**
   - Ir a: https://console.anthropic.com/
   - Crear/iniciar sesiÃ³n
   - Generar nueva API key en secciÃ³n "API Keys"
   - Guardarla en `n8n_Supabase/.env.automation.txt`

2. **Acceder a n8n:**
   - URL: https://n8n-production-bb2d.up.railway.app
   - Crear nuevo workflow llamado "Recomendaciones IA Diarias"

3. **Crear workflow paso a paso (10 nodos):**
   - Nodo 1: Schedule Trigger (cada dÃ­a 9 AM)
   - Nodo 2: Supabase - Get Active Guests
   - Nodo 3: Filter Guests (con check-in activo)
   - Nodo 4: Loop Over Guests
   - Nodo 5: Claude AI - Generate Recommendations
   - Nodo 6: Format Message
   - Nodo 7: SendGrid - Send Email
   - Nodo 8: WhatsApp Business API (opcional)
   - Nodo 9: Log to Supabase
   - Nodo 10: Error Handler

**MÃ‰TODO DE APRENDIZAJE:**
- TÃº creas el workflow con mi guÃ­a paso a paso
- AprenderÃ¡s haciendo, no solo viendo
- Te explico cada nodo y por quÃ© lo usamos

---

## n8n AUTOMATION SETUP

### **Credenciales Configuradas:**

**n8n Instance:**
- URL: https://n8n-production-bb2d.up.railway.app
- Hosting: Railway
- Webhook ejemplo: /webhook/2f390313-a7ef-44cf-8040-f3fecc4fd824

**SendGrid (Email):**
- API Key: âœ… Configurado en `.env.automation.txt`
- From Email: josecarrallodelafuente@gmail.com
- From Name: MY HOST BizMate

**Supabase:**
- Project ID: jjpscimtxrudtepzwhag
- URL: https://jjpscimtxrudtepzwhag.supabase.co
- Integrado en Properties module

**Pendiente:**
- âŒ Claude API Key (Anthropic) - **NECESARIO PARA FLUJO B**

### **Plan de Automatizaciones (21 Workflows):**

**UbicaciÃ³n:** `Documentos/MY-HOST-BizMate-Plan-Automatizaciones-n8n.md`

**CategorÃ­as:**
1. **GestiÃ³n de Reservas (7 flujos):**
   - ConfirmaciÃ³n automÃ¡tica, pagos, cancelaciones, modificaciones

2. **IA y PersonalizaciÃ³n (5 flujos):**
   - â­ Flujo B: Recomendaciones IA Diarias (SIGUIENTE)
   - Voice AI, Cultural Intelligence, Trip Planning

3. **Operaciones (5 flujos):**
   - Check-in digital, limpieza, mantenimiento, inventario

4. **Marketing y Reviews (4 flujos):**
   - Social media, email campaigns, review requests

### **Archivos n8n:**
- `n8n_Supabase/.env.automation.txt` - Credenciales
- `n8n_Supabase/` - Directorio para workflows exportados
- Plan completo en: `Documentos/MY-HOST-BizMate-Plan-Automatizaciones-n8n.md`

---

## PRÃ“XIMAS TAREAS DESPUÃ‰S DE n8n:

1. **Backend Integration:**
   - Implementar CRUD completo con Supabase
   - Conectar Properties con base de datos real
   - Sistema de autenticaciÃ³n

2. **Features Nuevas:**
   - Completar mÃ³dulos "Coming Soon" (Cultural Intelligence)
   - IntegraciÃ³n real con APIs externas
   - Sistema de notificaciones

3. **Testing:**
   - Tests unitarios para componentes
   - Tests de integraciÃ³n
   - E2E testing

4. **OptimizaciÃ³n:**
   - Code splitting
   - Lazy loading de mÃ³dulos
   - Performance optimization

5. **Deploy:**
   - Configurar CI/CD
   - Variables de entorno
   - Production build

## NOTAS IMPORTANTES:

âš ï¸ **NO tocar:** App.jsx.backup (es el respaldo del cÃ³digo original)
âš ï¸ **Branch protegido:** main (trabajar en backup-antes-de-automatizacion)
âœ… **Todos los mÃ³dulos funcionan** - arquitectura lista para escalar
âœ… **Supabase integrado** en Properties module

## ARCHIVOS CLAVE:

- `src/App.jsx` - App principal refactorizada (214 lÃ­neas)
- `src/App.jsx.backup` - Backup del original (4,019 lÃ­neas)
- `src/services/supabase.js` - Servicio centralizado de Supabase
- `src/context/AppContext.jsx` - Estado global de la app
- `src/components/common/index.js` - Exports de componentes comunes

## MÃ“DULOS PRINCIPALES:

**Operations & Guest Management:**
- Dashboard, Bookings, PMS Calendar, Properties
- Operations Hub, Digital Check-in, Messages

**Revenue & Pricing:**
- Booking Engine, Payments, Smart Pricing
- RMS Integration, Reports

**AI Intelligence Layer:**
- AI Assistant, Voice AI Agent, Cultural Intelligence

**Marketing & Growth:**
- Multichannel, Marketing, Social Publisher, Reviews

**Workflows & Automations:**
- Workflows, AI Trip Planner, Booking Workflow

## SI NECESITAS CONTINUAR:

1. Navega a: `cd C:\myhost-bizmate`
2. Verifica branch: `git branch`
3. Inicia dev: `npm run dev`
4. ContinÃºa desarrollo en la nueva arquitectura modular

## HISTORIAL DE COMMITS RECIENTES:

```
e149395 - Refactor: Extract 21 modules from App.jsx monolith (4019 â†’ 214 lines)
7d32967 - Update gitignore for Vercel and backend scripts
f663601 - Add project documentation and architecture files
```

---

**Ãšltimo commit:** e149395 - "Refactor: Extract 21 modules from App.jsx monolith (4019 â†’ 214 lines)"
**Fecha:** 27 Nov 2025, 21:22:04
**Estado:** âœ… Todo funcionando, listo para continuar
**Repositorio:** https://github.com/Josecarrallo/myhost-bizmate
**Branch:** backup-antes-de-automatizacion

---

## PROMPT PARA NUEVA SESIÃ“N (28 NOV 2025):

Hola Claude Code, necesito continuar trabajando en MY HOST BizMate.

**PROYECTO:**
- UbicaciÃ³n: C:\myhost-bizmate
- Branch: backup-antes-de-automatizacion

**CONTEXTO - REFACTOR COMPLETADO (27 Nov):**
- âœ… Refactor estructural completo terminado
- âœ… App.jsx reducido de 4,019 â†’ 214 lÃ­neas (94.7%)
- âœ… 21 mÃ³dulos extraÃ­dos a componentes separados
- âœ… Commit e149395 pushed a GitHub
- âœ… AplicaciÃ³n 100% funcional sin errores

**TAREA ACTUAL - n8n WORKFLOW:**
Vamos a crear el "Flujo B: Recomendaciones IA Diarias"

**QUÃ‰ NECESITO:**
Aprendizaje hands-on - YO harÃ© el workflow con TU guÃ­a paso a paso.

**PASOS PENDIENTES:**
1. Obtener Claude API Key de https://console.anthropic.com/
2. Crear workflow en n8n (https://n8n-production-bb2d.up.railway.app)
3. Configurar 10 nodos desde Schedule Trigger hasta Error Handler
4. Probar el workflow con datos reales de Supabase

**ESTADO:**
- SendGrid: âœ… Configurado
- Supabase: âœ… Configurado
- n8n Railway: âœ… Activo
- Claude API: âŒ Pendiente obtener

Por favor:
1. Lee este documento de contexto completo
2. Confirma que entiendes dÃ³nde estamos
3. GuÃ­ame paso a paso para crear el Flujo B

---

**Alternativa:** Si quiero hacer otra tarea diferente, te lo indicarÃ© al inicio de la sesiÃ³n.
